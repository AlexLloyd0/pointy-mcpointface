sudo: required
language: python
python:
- 3.6
services:
- docker
env:
  global:
  - DOCKER_USERNAME=alexlloyd
  - secure: saw7TPyU2QzXM6qROldkaWYK3YsJQL9HGlYfVhGIWO4pOaG2L/2t7hJn6BBTN9Ap5XmhANzTySizd2Po9OpkmtiEB9o5MPyat6gBOoBFJgM8XitUzZVYnOuF3X/vpLoPqccNfStuVUtB7AkpONHrJalQpRntA0XuqY23FfaLd2PaoMaUmZ8dYq3T6RVewgAoHACQYEg6zsQVTqDgU3AWXKUakTZ8Ji6k1NxG1kObrQVyB/5m/a/QIqVIzfIqCak2w+zaiBdTbeNKM/9F4JLvYFV/Ya9+Y6DS8DAjL43cy+rUs5twsyOGCzY//lJ90PDBAZcuBEebFrUeU5BH5Ptg9LwDHxRZkeAEIcOxqS8ok2PrwgWsFr6nFXNm11j1hOHnjcw/V7cx1BFpvVPBGsmJhPw4VFQvQLkCvIqmDcS+ZlDof4l2ko/8gK/1WW1eO+x/lAxVw/N5bCelpNa+l4s7k7xqfzPnJcAf6S4hRRxkOyEO8O26pYFD4e8ZhV+Yt6Py62DKMZML/z+jhmZG63A+hBkAeel35FDMZhk6nfkC0dGwGJcviTmKli2Ylq08BY/i3o/laDn0OI3fm3sSJTgtS994uZ/JS/cn383PkLhT/WY44NGMT7+7d44XdB+rdmlpi0yQ/MPTtGYd3Qp6nNWaI04+YSMY9I03APhLRjX4gfs=
  - secure: Mulo9rhCml21XteBMW4OesB2+7/ElOexSEEucPyl2lILC2dt0QkpCk3aI8spGidy/VPYq9miqL9/hWhGMOHkVEAdIn50d6g3tq9ku6tw+AWFzGZOL3Tdg9CVJqiSh+99UbOtTtxmttJ+NtRyC+VKqRHBaj45vHd05OJqw0pHg19oYWPmo3r7EsKWURQDsR80hamo4uh9pvINmWvfiHcLVE147WVK/sTr4Omdc1sBVXSQt9O1Wvj8SNzBeewaf6oa4uPoMBQkis2qpz1/illM9BbroTjJLSSaWZYJm8kmTFhFEXFnotYXtdxHZ4Bzs3aoshnF0/svRP+ovcooU+K1xJ460zz6lfheX8OGO8rKg8mz3B1nPXSrXXcM4nPnnKnb9Yvwf0SNsIBHFZI/dD9VokTo7mfc5u5Ffp5QitguHsrqnclaVWljNO7kOW6snE0PP6y1FMbGVlNjiEsM8mB5SsIsVJAJKoP0ZFg2iF+nTKptz/yBYTxP4BxPt2zhtBQLE4zsWSpRHNrATJWslMhrzzwgasMN+LsCdMQJwt8YMEYsOTcBiGOrXxv/FQZsg2ajoLi+ZvkkHo9D7KqEY9MONqxel7zM7amuqaZbOqpie1pplTG37wk3J/8wqg6rVGqd2HYfwpNfeLpTgNoSnj2IqMNoriIngFRzod9S0aik/C0=
install:
- pip install pycodestyle mypy
before_script:
- pycodestyle
- mypy run.py pointy --ignore-missing-imports
script:
- docker build --tag pointy .
after_success:
- docker run -d pointy -e POINTY_VERIFY_TOKEN
- docker tag pointy alexlloyd/pointy:$TRAVIS_BRANCH
deploy:
  skip_cleanup: true
  provider: script
  script: bash docker_push
  on:
    branch: linode
#    tags: true
